<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wapping</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#1e1e2f; --text:#f0f0f0; --accent:#ffcc00;
      --card:#2c2c3e; --ack:#234231; --ack-border:#2ecc71;
      --blue:#3498db; --orange:#e67e22; --green:#28a745; --red:#dc3545; --teal:#17a2b8; --purple:#9b59b6;
      --discord:#5865F2;
    }
    body { background:var(--bg); color:var(--text); font-family:Arial,Helvetica,sans-serif; text-align:center; padding:24px; margin:0; }
    h1 { color:var(--accent); margin:0 0 14px; font-size:40px; }
    .timer{
      background:var(--card); margin:12px auto; padding:12px 16px; border-radius:10px;
      width:1100px; max-width:95vw; display:flex; align-items:center; justify-content:space-between;
      gap:14px; font-size:16px; white-space:nowrap; box-shadow:0 4px 10px rgba(0,0,0,.35);
      outline:1px solid rgba(255,255,255,.08);
      transition:background .2s, outline-color .2s;
    }
    .timer.ack { background:var(--ack); outline-color:var(--ack-border); }
    .left{ overflow:hidden; text-overflow:ellipsis; }
    .time{ font-weight:700; font-variant-numeric:tabular-nums; margin-left:8px; }
    .right{ display:inline-flex; align-items:center; gap:10px; }
    .speaker{ cursor:pointer; font-size:18px; }
    .controls{ margin:18px 0; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    button{
      border:none; border-radius:12px; padding:10px 18px; font-weight:700; cursor:pointer; color:#fff;
      display:inline-flex; align-items:center; gap:8px; transition:background .2s, transform .05s;
    }
    button:hover{ opacity:.92; } button:active{ transform:translateY(1px); }
    #toggleBtn{ background:var(--blue); }         /* Start (blue) ‚Üí Pause (orange) ‚Üí Resume (green) */
    #resetBtn{  background:var(--purple); }       /* Reset is purple */
    #muteBtn{   background:var(--red); }          /* Mute red; Unmute teal */

    footer{ margin-top:26px; padding-top:14px; border-top:1px solid #444; opacity:.95; font-size:14px; }
    .dogdog{ color:var(--accent); font-weight:700; }

    /* Discord footer */
    .discord-block{
      margin-top:12px; display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap; color:#fff;
    }
    .discord-chip{
      background:var(--card); padding:4px 10px; border-radius:8px; font-weight:700; color:#7289da;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .icon-btn{
      background:transparent; border:none; cursor:pointer; padding:6px; border-radius:8px; line-height:0;
      color:#b9bbbe; transition:color .2s, background .2s, transform .05s;
    }
    .icon-btn:hover{ color:#fff; background:rgba(255,255,255,.06); }
    .icon-btn:active{ transform:translateY(1px); }
    .copied-msg{ font-size:12px; color:#2ecc71; font-weight:700; opacity:0; transition:opacity .2s; }
    .svg{ width:20px; height:20px; display:inline-block; vertical-align:middle; }
  </style>
</head>
<body>
  <h1>Wapping</h1>

  <div id="rows"></div>

  <div class="controls">
    <button id="toggleBtn">‚ñ∂Ô∏è Start</button>
    <button id="resetBtn">üîÅ Reset</button>
    <button id="muteBtn">üîá Mute</button>
  </div>

  <footer>
    <p style="margin:0 0 8px 0;">
      <strong>Want your own custom reminders?</strong><br>
      Reach out to <span class="dogdog">Dogdog</span> for personalized versions üê∂
    </p>

    <!-- Discord footer: logo + tag chip + icon-only copy (stacked-sheets icon) -->
    <div class="discord-block">
      <!-- Discord logo (SVG) -->
      <svg class="svg" viewBox="0 0 245 240" aria-hidden="true">
        <path fill="#5865F2" d="M104.4 104.3c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.6-11.1-10.2-11.1zm36.2 0c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.6-11.1-10.2-11.1z"/><path fill="#5865F2" d="M189.5 20h-134A35.5 35.5 0 0 0 20 55.5v129A35.5 35.5 0 0 0 55.5 220h93.7l-4.4-15.4 10.6 9.9 10 9.3 17.8 16.1V220h6.3A35.5 35.5 0 0 0 225 184.5v-129A35.5 35.5 0 0 0 189.5 20zm-26.1 135s-2.4-2.9-4.4-5.4c8.6-2.4 11.8-7.6 11.8-7.6-2.7 1.7-5.3 3-7.6 3.9-3.3 1.4-6.6 2.3-9.8 2.9-6.5 1.2-12.4.9-17.5-.1-3.8-.7-7-1.6-9.7-2.9-1.5-.7-3.1-1.5-4.7-2.6-.2-.1-.3-.2-.5-.3-.1-.1-.2-.1-.3-.2-1.4-.8-2.2-1.3-2.2-1.3s3.1 5.1 11.3 7.5c-1.9 2.5-4.4 5.5-4.4 5.5-14.6-.5-20.1-10-20.1-10 0-21.2 9.5-38.4 9.5-38.4 9.5-7.1 18.5-6.9 18.5-6.9l.7.8c-11.9 3.4-17.3 8.6-17.3 8.6s1.5-.8 4-1.9c7.3-3.2 13-4.1 15.3-4.3.4-.1.8-.1 1.2-.1 4.3-.5 9.3-.6 14.5-.1 6.8.8 14 2.9 21.4 7.2 0 0-5.2-5-16.4-8.4l1-1.1s9-.2 18.5 6.9c0 0 9.5 17.2 9.5 38.4 0 0-5.5 9.4-20.2 10z"/>
      </svg>

      <span>Discord:</span>
      <code class="discord-chip" id="discordTag">dogtooth.7</code>

      <!-- icon-only copy button (STACKED SHEETS ICON) -->
      <button class="icon-btn" id="copyDiscord" title="Copy to clipboard" aria-label="Copy to clipboard">
        <svg class="svg" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M16 1H6a2 2 0 0 0-2 2v10h2V3h10V1z"/>
          <path fill="currentColor" d="M18 5H10a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H10V7h8v14z"/>
        </svg>
      </button>

      <span id="copiedMsg" class="copied-msg">Copied!</span>
    </div>
  </footer>

  <script>
    // Reminders (secs + initial label shown before Start)
    const items = [
      { text: "Use phalanx u fucken dog", secs: 30,  say: "Use phalanx u fucken dog", initialDisplay: "30s" },
      { text: "Use erda fountain and loot ur mesos u fucken dog", secs: 55,  say: "Use erda fountain and loot your mesos u fucken dog", initialDisplay: "55s" },
      { text: "Pop ur fucken EXP multipliers or ur a dog", secs: 30 * 60, say: "Pop your fucken E X P multipliers or you're a dog", initialDisplay: "00:30:00" },
      { text: "If ur a true blue fair dinkum aussie, ud pop a VB longneck wap u fucken dog cunts", secs: 2 * 60 * 60, say: "If you're a true blue fair dinkum aussie, you'd pop a V B longneck wap u fucken dog cunts", initialDisplay: "2h" }
    ];

    let counters   = items.map(i => i.secs);
    let timerId    = null;
    let isRunning  = false;
    let isPaused   = false;
    let muted      = false;
    let femaleVoice = null;

    // Build rows
    const rowsDiv = document.getElementById("rows");
    items.forEach((it, i) => {
      const row = document.createElement("div");
      row.className = "timer";
      row.id = `row${i}`;
      row.innerHTML = `
        <div class="left">${it.text} ‚Äî <span class="time" id="time${i}">${it.initialDisplay}</span></div>
        <div class="right"><span class="speaker" data-idx="${i}" title="Test voice">üîä</span></div>
      `;
      rowsDiv.appendChild(row);
    });

    // Test speakers
    document.querySelectorAll(".speaker").forEach(btn => {
      btn.addEventListener("click", () => {
        const idx = Number(btn.getAttribute("data-idx"));
        speak(items[idx].say, idx);
      });
    });

    // Prefer nicer voices if present
    function pickVoice() {
      const want = [
        "Microsoft Aria Online (Natural)","Microsoft Jenny Online (Natural)","Microsoft Sonia Online (Natural)","Microsoft Natasha Online (Natural)",
        "Google UK English Female","Google US English","Google UK English Male","Samantha","Karen","Tessa"
      ];
      const voices = speechSynthesis.getVoices();
      const scored = voices.map(v => {
        let score = 0;
        const n = (v.name + " " + (v.voiceURI || "")).toLowerCase();
        if (/english|en-/.test(v.lang || "")) score += 2;
        if (/female/.test(n)) score += 2;
        if (/natural|neural|google/.test(n)) score += 3;
        if (/(en-au|en-gb)/.test((v.lang || "").toLowerCase())) score += 2;
        if (want.some(w => v.name.indexOf(w) !== -1)) score += 5;
        return { v, score };
      }).sort((a,b) => b.score - a.score);
      femaleVoice = scored.length ? scored[0].v : (voices[0] || null);
    }
    speechSynthesis.onvoiceschanged = pickVoice; pickVoice();

    function speak(msg, idx) {
      if (muted) return;
      const u = new SpeechSynthesisUtterance(msg);
      if (femaleVoice) u.voice = femaleVoice;
      u.lang  = (femaleVoice && femaleVoice.lang) ? femaleVoice.lang : "en-AU";
      u.rate  = 0.95;
      u.pitch = 1.12;
      u.volume = 1;

      const row = document.getElementById(`row${idx}`);
      if (row) row.classList.add("ack");
      u.onend = () => { if (row) row.classList.remove("ack"); };

      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }

    function hms(sec){
      const h=String(Math.floor(sec/3600)).padStart(2,"0");
      const m=String(Math.floor((sec%3600)/60)).padStart(2,"0");
      const s=String(sec%60).padStart(2,"0");
      return `${h}:${m}:${s}`;
    }

    function paint(initial=false){
      items.forEach((it,i)=>{
        const el=document.getElementById(`time${i}`);
        if (initial) el.textContent = it.initialDisplay;
        else el.textContent = (it.secs < 60) ? (counters[i] + "s") : hms(counters[i]);
      });
    }

    function startTicking(){
      if (timerId) return;
      timerId = setInterval(() => {
        items.forEach((it,i)=>{
          counters[i]--;
          if (counters[i] <= 0) {
            speak(it.say, i);
            counters[i] = it.secs;
          }
        });
        paint(false);
      }, 1000);
    }

    function stopTicking(){ clearInterval(timerId); timerId = null; }

    // Controls
    const toggleBtn = document.getElementById("toggleBtn");
    const resetBtn  = document.getElementById("resetBtn");
    const muteBtn   = document.getElementById("muteBtn");

    // Start ‚ñ∂Ô∏è (blue) ‚Üí Pause ‚è∏Ô∏è (orange) ‚Üí Resume ‚ñ∂Ô∏è (green)
    toggleBtn.onclick = () => {
      if (!isRunning) {
        isRunning = true; isPaused = false;
        paint(false); startTicking();
        toggleBtn.textContent = "‚è∏Ô∏è Pause";
        toggleBtn.style.background = "var(--orange)";
      } else if (!isPaused) {
        isPaused = true; stopTicking();
        toggleBtn.textContent = "‚ñ∂Ô∏è Resume";
        toggleBtn.style.background = "var(--green)";
      } else {
        isPaused = false; startTicking();
        toggleBtn.textContent = "‚è∏Ô∏è Pause";
        toggleBtn.style.background = "var(--orange)";
      }
    };

    // Reset
    resetBtn.onclick = () => {
      stopTicking();
      counters  = items.map(i => i.secs);
      isRunning = false; isPaused = false;
      toggleBtn.textContent = "‚ñ∂Ô∏è Start";
      toggleBtn.style.background = "var(--blue)";
      paint(true);
    };

    // Mute red (sound ON = shows Mute); Unmute teal (muted state)
    muteBtn.onclick = () => {
      muted = !muted;
      if (muted) {
        muteBtn.textContent = "üîä Unmute";
        muteBtn.style.background = "var(--teal)";
      } else {
        muteBtn.textContent = "üîá Mute";
        muteBtn.style.background = "var(--red)";
      }
    };

    // Initial render
    paint(true);

    // Copy "dogtooth.7" to clipboard
    (function setupCopy(){
      const btn = document.getElementById('copyDiscord');
      if (!btn) return;
      btn.addEventListener('click', async () => {
        const text = 'dogtooth.7';
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
          } else {
            const ta = document.createElement('textarea');
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            ta.remove();
          }
          const msg = document.getElementById('copiedMsg');
          if (msg) { msg.style.opacity = '1'; setTimeout(() => msg.style.opacity = '0', 1200); }
        } catch {}
      });
    })();
  </script>
</body>
</html>
